!function(a){function b(a){if(h.firstElementChild)h.firstElementChild.appendChild(a);else{var b=g.createElement("div");b.appendChild(a),g.write(b.innerHTML)}}function c(a){h.querySelector('meta[name="viewport"]').setAttribute("content",a)}function d(){document.body?document.body.style.fontSize=12*l+"px":document.addEventListener("DOMContentLoaded",d)}function e(){var a=h.clientWidth/10;h.style.fontSize=a+"px"}var f,g=a.document,h=g.documentElement,i=g.querySelector('meta[name="viewport"]'),j=g.querySelector('meta[name="flexible"]'),k=0,l=0;if(i){console.warn("将根据已有的meta标签来设置缩放比例");var m=i.getAttribute("content").match(/initial\-scale=([\d\.]+)/);m&&(k=parseFloat(m[1]),l=parseInt(1/k))}else if(j){var n=j.getAttribute("content");if(n){var o=n.match(/initial\-dpr=([\d\.]+)/);o&&(l=parseFloat(o[1]),k=parseFloat((1/l).toFixed(2)))}}k||(l=a.devicePixelRatio,l=l>=3?3:l>=2?2:1,k=1/l),i||(i=g.createElement("meta"),i.setAttribute("name","viewport"),i.setAttribute("content","target-densitydpi=device-dpi,user-scalable=no,initial-scale="+k+",maximum-scale="+k+", minimum-scale="+k),b(i),980===h.clientWidth&&(c("target-densitydpi=device-dpi,width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"),l=1)),h.setAttribute("data-dpr",l+""),d(),e(),a.addEventListener("resize",function(){clearTimeout(f),f=setTimeout(e,300)}),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(f),f=setTimeout(e,300))})}(window);